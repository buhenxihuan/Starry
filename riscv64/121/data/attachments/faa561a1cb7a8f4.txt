INFO     root:test_arceos.py:157 æµ‹è¯•å‰ç½®æ­¥éª¤ä¸€ï¼šåˆå§‹åŒ–cmdåº“
INFO     root:test_arceos.py:158 Setup for class with cmd
INFO     root:test_arceos.py:171 test_type=clippy
INFO     root:test_arceos.py:172 test_cmd=export PATH=$PATH:/home/runner/.cargo/bin:/home/runner/work/Starry/Starry/riscv64-linux-musl-cross/bin &&             cd /home/runner/work/Starry/Starry && make A=apps/oscomp ARCH=riscv64 clippy
INFO     root:test_arceos.py:174 res=[37mcargo clippy[0m [90m--all-features --workspace --exclude axlog --target riscv64gc-unknown-none-elf [0m
info: syncing channel updates for 'nightly-2023-11-30-x86_64-unknown-linux-gnu'
info: latest update on 2023-11-30, rust version 1.76.0-nightly (b10cfcd65 2023-11-29)
info: downloading component 'cargo'
info: downloading component 'clippy'
info: downloading component 'llvm-tools'
info: downloading component 'rust-src'
info: downloading component 'rust-std' for 'aarch64-unknown-none-softfloat'
info: downloading component 'rust-std' for 'riscv64gc-unknown-none-elf'
info: downloading component 'rust-std'
info: downloading component 'rust-std' for 'x86_64-unknown-none'
info: downloading component 'rustc'
info: downloading component 'rustfmt'
info: installing component 'cargo'
info: installing component 'clippy'
info: installing component 'llvm-tools'
info: installing component 'rust-src'
info: installing component 'rust-std' for 'aarch64-unknown-none-softfloat'
info: installing component 'rust-std' for 'riscv64gc-unknown-none-elf'
info: installing component 'rust-std'
info: installing component 'rust-std' for 'x86_64-unknown-none'
info: installing component 'rustc'
info: installing component 'rustfmt'
    Updating git repository `https://github.com/c0per/smoltcp`
    Updating git repository `https://github.com/rcore-os/bitmap-allocator.git`
    Updating crates.io index
    Updating git repository `https://github.com/lhw2002426/bcm2835-sdhci.git`
    Updating git repository `https://github.com/KuangjuX/ixgbe-driver.git`
    Updating git repository `https://github.com/rcore-os/virtio-drivers.git`
    Updating git repository `https://github.com/mexus/numeric-enum-macro`
    Updating git repository `https://github.com/rafalh/rust-fatfs`
    Updating git repository `https://github.com/elliott10/lwext4_rust.git`
    Updating git submodule `https://github.com/gkostka/lwext4.git`
 Downloading crates ...
  Downloaded autocfg v1.1.0
  Downloaded zero v0.1.3
  Downloaded x86_64 v0.14.10
  Downloaded ppv-lite86 v0.2.17
  Downloaded bindgen v0.66.1
  Downloaded xmas-elf v0.9.0
  Downloaded embedded-hal v0.2.7
  Downloaded zerocopy v0.7.26
  Downloaded zerocopy-derive v0.7.26
  Downloaded libc v0.2.147
  Downloaded embedded-graphics v0.8.1
  Downloaded x86 v0.52.0
  Downloaded syn v2.0.39
  Downloaded syn v1.0.109
  Downloaded regex-syntax v0.7.4
  Downloaded regex-automata v0.3.6
  Downloaded regex v1.9.3
  Downloaded micromath v2.0.0
  Downloaded winnow v0.5.14
  Downloaded volatile v0.4.6
  Downloaded unicode-ident v1.0.11
  Downloaded toml_edit v0.19.14
  Downloaded serde_derive v1.0.185
  Downloaded serde v1.0.185
  Downloaded raw-cpuid v11.0.1
  Downloaded raw-cpuid v10.7.0
  Downloaded rand v0.8.5
  Downloaded prettyplease v0.2.12
  Downloaded nom v7.1.3
  Downloaded minimal-lexical v0.2.1
  Downloaded indexmap v2.0.0
  Downloaded heapless v0.7.16
  Downloaded hashbrown v0.14.0
  Downloaded glob v0.3.1
  Downloaded x2apic v0.4.2
  Downloaded which v4.4.0
  Downloaded version_check v0.9.4
  Downloaded unicode-width v0.1.10
  Downloaded toml_datetime v0.6.3
  Downloaded tock-registers v0.8.1
  Downloaded thiserror-impl v1.0.47
  Downloaded thiserror v1.0.47
  Downloaded svgbobdoc v0.3.0
  Downloaded spin v0.9.8
  Downloaded semver v1.0.18
  Downloaded sbi-spec v0.0.4
  Downloaded rustc-hash v1.1.0
  Downloaded rlsf v0.2.1
  Downloaded riscv v0.10.1
  Downloaded rand_core v0.6.4
  Downloaded rand_chacha v0.3.1
  Downloaded proc-macro2 v1.0.69
  Downloaded proc-macro-error v1.0.4
  Downloaded num_enum_derive v0.5.11
  Downloaded num_enum v0.5.11
  Downloaded nb v1.1.0
  Downloaded managed v0.8.0
  Downloaded log v0.4.19
  Downloaded lock_api v0.4.10
  Downloaded lazy_static v1.4.0
  Downloaded defmt v0.3.5
  Downloaded const-default v1.0.0
  Downloaded cexpr v0.6.0
  Downloaded bit v0.1.1
  Downloaded cfg-if v1.0.0
  Downloaded bitflags v1.3.2
  Downloaded volatile v0.3.0
  Downloaded volatile v0.2.7
  Downloaded void v1.0.2
  Downloaded static_assertions v1.1.0
  Downloaded stable_deref_trait v1.2.0
  Downloaded spin v0.5.2
  Downloaded shlex v1.1.0
  Downloaded scopeguard v1.2.0
  Downloaded sbi-rt v0.0.2
  Downloaded rustversion v1.0.14
  Downloaded rustc_version v0.4.0
  Downloaded proc-macro-error-attr v1.0.4
  Downloaded peeking_take_while v0.1.2
  Downloaded nb v0.1.3
  Downloaded bitmaps v3.2.0
  Downloaded equivalent v1.0.1
  Downloaded aho-corasick v1.0.4
  Downloaded paste v1.0.14
  Downloaded num-traits v0.2.16
  Downloaded memchr v2.5.0
  Downloaded lazycell v1.3.0
  Downloaded getrandom v0.2.10
  Downloaded either v1.9.0
  Downloaded critical-section v1.1.2
  Downloaded clang-sys v1.6.1
  Downloaded buddy_system_allocator v0.9.0
  Downloaded core_detect v1.0.0
  Downloaded defmt-macros v0.3.6
  Downloaded byteorder v1.4.3
  Downloaded bitflags v2.4.0
  Downloaded float-cmp v0.9.0
  Downloaded defmt-parser v0.3.3
  Downloaded bit_field v0.10.2
  Downloaded base64 v0.13.1
  Downloaded az v1.2.1
  Downloaded aarch64-cpu v9.3.1
  Downloaded quote v1.0.33
  Downloaded libloading v0.7.4
  Downloaded hash32 v0.2.1
  Downloaded embedded-graphics-core v0.4.0
   Compiling proc-macro2 v1.0.69
   Compiling unicode-ident v1.0.11
    Checking log v0.4.19
   Compiling autocfg v1.1.0
    Checking cfg-if v1.0.0
    Checking tock-registers v0.8.1
   Compiling serde v1.0.185
   Compiling hashbrown v0.14.0
   Compiling equivalent v1.0.1
    Checking bitflags v2.4.0
   Compiling axerrno v0.1.0 (/home/runner/work/Starry/Starry/crates/axerrno)
   Compiling syn v1.0.109
   Compiling indexmap v2.0.0
   Compiling quote v1.0.33
   Compiling winnow v0.5.14
   Compiling syn v2.0.39
   Compiling toml_datetime v0.6.3
   Compiling lock_api v0.4.10
    Checking bit_field v0.10.2
    Checking byteorder v1.4.3
   Compiling toml_edit v0.19.14
    Checking scopeguard v1.2.0
   Compiling semver v1.0.18
    Checking aarch64-cpu v9.3.1
   Compiling memchr v2.5.0
   Compiling libc v0.2.147
   Compiling glob v0.3.1
    Checking spin v0.9.8
   Compiling clang-sys v1.6.1
   Compiling axconfig v0.1.0 (/home/runner/work/Starry/Starry/modules/axconfig)
   Compiling prettyplease v0.2.12
   Compiling unicode-width v0.1.10
   Compiling base64 v0.13.1
   Compiling rustc_version v0.4.0
   Compiling svgbobdoc v0.3.0
   Compiling minimal-lexical v0.2.1
    Checking nb v1.1.0
    Checking buddy_system_allocator v0.9.0
    Checking memory_addr v0.1.0 (/home/runner/work/Starry/Starry/crates/memory_addr)
    Checking const-default v1.0.0
   Compiling regex-syntax v0.7.4
   Compiling libloading v0.7.4
    Checking rlsf v0.2.1
   Compiling crate_interface v0.1.1 (/home/runner/work/Starry/Starry/crates/crate_interface)
    Checking slab_allocator v0.3.1 (/home/runner/work/Starry/Starry/crates/slab_allocator)
   Compiling nom v7.1.3
    Checking nb v0.1.3
   Compiling heapless v0.7.16
    Checking axfs_vfs v0.1.0 (/home/runner/work/Starry/Starry/crates/axfs_vfs)
    Checking bitmap-allocator v0.1.0 (https://github.com/rcore-os/bitmap-allocator.git?rev=88e871a#88e871a5)
    Checking static_assertions v1.1.0
   Compiling bindgen v0.66.1
   Compiling riscv v0.10.1
    Checking kernel_guard v0.1.0 (/home/runner/work/Starry/Starry/crates/kernel_guard)
   Compiling either v1.9.0
    Checking spinlock v0.1.0 (/home/runner/work/Starry/Starry/crates/spinlock)
   Compiling regex-automata v0.3.6
   Compiling percpu v0.1.0 (/home/runner/work/Starry/Starry/crates/percpu)
    Checking spin v0.5.2
    Checking void v1.0.2
    Checking lazy_static v1.4.0
    Checking embedded-hal v0.2.7
   Compiling cexpr v0.6.0
   Compiling which v4.4.0
    Checking sbi-spec v0.0.4
    Checking allocator v0.1.0 (/home/runner/work/Starry/Starry/crates/allocator)
   Compiling axhal v0.1.0 (/home/runner/work/Starry/Starry/modules/axhal)
   Compiling regex v1.9.3
   Compiling percpu_macros v0.1.0 (/home/runner/work/Starry/Starry/crates/percpu_macros)
    Checking page_table_entry v0.1.0 (/home/runner/work/Starry/Starry/crates/page_table_entry)
    Checking hash32 v0.2.1
    Checking stable_deref_trait v1.2.0
   Compiling lazycell v1.3.0
   Compiling peeking_take_while v0.1.2
    Checking bitflags v1.3.2
   Compiling smoltcp v0.10.0 (https://github.com/c0per/smoltcp?branch=starryos#a2e59192)
   Compiling shlex v1.1.0
   Compiling rustc-hash v1.1.0
    Checking critical-section v1.1.2
    Checking page_table v0.1.0 (/home/runner/work/Starry/Starry/crates/page_table)
    Checking axalloc v0.1.0 (/home/runner/work/Starry/Starry/modules/axalloc)
    Checking sbi-rt v0.0.2
    Checking axfs_ramfs v0.1.0 (/home/runner/work/Starry/Starry/crates/axfs_ramfs)
    Checking axlog v0.1.0 (/home/runner/work/Starry/Starry/modules/axlog)
   Compiling zerocopy-derive v0.7.26
warning: use of `default` to create a unit struct
  --> crates/axfs_ramfs/src/dir.rs:54:40
   |
54 |                     Arc::new(Interrupts::default())
   |                                        ^^^^^^^^^^^ help: remove this call to `default`
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#default_constructed_unit_structs
   = note: `#[warn(clippy::default_constructed_unit_structs)]` on by default

warning: `axfs_ramfs` (lib) generated 1 warning (run `cargo clippy --fix --lib -p axfs_ramfs` to apply 1 suggestion)
    Checking ratio v0.1.0 (/home/runner/work/Starry/Starry/crates/ratio)
    Checking handler_table v0.1.0 (/home/runner/work/Starry/Starry/crates/handler_table)
    Checking driver_common v0.1.0 (/home/runner/work/Starry/Starry/crates/driver_common)
    Checking lazy_init v0.1.0 (/home/runner/work/Starry/Starry/crates/lazy_init)
    Checking managed v0.8.0
    Checking zerocopy v0.7.26
    Checking volatile v0.2.7
    Checking core_detect v1.0.0
    Checking volatile v0.3.0
    Checking ixgbe-driver v0.1.0 (https://github.com/KuangjuX/ixgbe-driver.git?rev=8e5eb74#8e5eb741)
    Checking virtio-drivers v0.7.1 (https://github.com/rcore-os/virtio-drivers.git?rev=4b60f5d#4b60f5d3)
    Checking bcm2835-sdhci v0.1.0 (https://github.com/lhw2002426/bcm2835-sdhci.git?rev=e974f16#e974f168)
    Checking numeric-enum-macro v0.2.0 (https://github.com/mexus/numeric-enum-macro#20aef288)
    Checking linked_list v0.1.0 (/home/runner/work/Starry/Starry/crates/linked_list)
    Checking scheduler v0.1.0 (/home/runner/work/Starry/Starry/crates/scheduler)
    Checking axsignal v0.1.0 (/home/runner/work/Starry/Starry/modules/axsignal)
    Checking driver_block v0.1.0 (/home/runner/work/Starry/Starry/crates/driver_block)
    Checking driver_net v0.1.0 (/home/runner/work/Starry/Starry/crates/driver_net)
    Checking driver_display v0.1.0 (/home/runner/work/Starry/Starry/crates/driver_display)
   Compiling axdriver v0.1.0 (/home/runner/work/Starry/Starry/modules/axdriver)
    Checking timer_list v0.1.0 (/home/runner/work/Starry/Starry/crates/timer_list)
    Checking axtask v0.1.0 (/home/runner/work/Starry/Starry/modules/axtask)
    Checking driver_virtio v0.1.0 (/home/runner/work/Starry/Starry/crates/driver_virtio)
warning: you should consider adding a `Default` implementation for `TaskId`
   --> modules/axtask/src/task.rs:152:5
    |
152 | /     pub fn new() -> Self {
153 | |         Self(ID_COUNTER.fetch_add(1, Ordering::Relaxed))
154 | |     }
    | |_____^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#new_without_default
    = note: `#[warn(clippy::new_without_default)]` on by default
help: try adding this
    |
151 + impl Default for TaskId {
152 +     fn default() -> Self {
153 +         Self::new()
154 +     }
155 + }
    |

warning: casting raw pointers to the same type and constness is unnecessary (`*mut alloc::string::String` -> `*mut alloc::string::String`)
   --> modules/axtask/src/task.rs:200:14
    |
200 |             *(self.name.get() as *mut String) = String::from(name);
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `self.name.get()`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#unnecessary_cast
    = note: `#[warn(clippy::unnecessary_cast)]` on by default

    Checking driver_pci v0.1.0 (/home/runner/work/Starry/Starry/crates/driver_pci)
warning: methods called `into_*` usually take `self` by value
  --> modules/axtask/src/stat.rs:83:29
   |
83 |     pub fn into_kernel_mode(&mut self, tid: isize) {
   |                             ^^^^^^^^^
   |
   = help: consider choosing a less ambiguous name
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wrong_self_convention
   = note: `#[warn(clippy::wrong_self_convention)]` on by default

warning: methods called `into_*` usually take `self` by value
  --> modules/axtask/src/stat.rs:93:27
   |
93 |     pub fn into_user_mode(&mut self, tid: isize) {
   |                           ^^^^^^^^^
   |
   = help: consider choosing a less ambiguous name
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#wrong_self_convention

    Checking rand_core v0.6.4
warning: `axtask` (lib) generated 4 warnings (run `cargo clippy --fix --lib -p axtask` to apply 1 suggestion)
    Checking axsync v0.1.0 (/home/runner/work/Starry/Starry/modules/axsync)
    Checking rand v0.8.5
    Checking axio v0.1.0 (/home/runner/work/Starry/Starry/crates/axio)
    Checking fatfs v0.4.0 (https://github.com/rafalh/rust-fatfs?rev=a3a834e#a3a834ef)
    Checking capability v0.1.0 (/home/runner/work/Starry/Starry/crates/capability)
    Checking zero v0.1.3
    Checking xmas-elf v0.9.0
    Checking axfs_devfs v0.1.0 (/home/runner/work/Starry/Starry/crates/axfs_devfs)
    Checking axnet v0.1.0 (/home/runner/work/Starry/Starry/modules/axnet)
    Checking axdisplay v0.1.0 (/home/runner/work/Starry/Starry/modules/axdisplay)
   Compiling num_enum_derive v0.5.11
   Compiling num-traits v0.2.16
warning: slow zero-filling initialization
  --> modules/axnet/src/smoltcp_impl/loopback.rs:70:9
   |
69 |         let mut buffer = Vec::new();
   |                          ---------- help: consider replacing this with: `vec![0; len]`
70 |         buffer.resize(len, 0);
   |         ^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#slow_vector_initialization
   = note: `#[warn(clippy::slow_vector_initialization)]` on by default

warning: `axnet` (lib) generated 1 warning
   Compiling az v1.2.1
    Checking bitmaps v3.2.0
    Checking flatten_objects v0.1.0 (/home/runner/work/Starry/Starry/crates/flatten_objects)
    Checking num_enum v0.5.11
    Checking float-cmp v0.9.0
    Checking micromath v2.0.0
    Checking dw_apb_uart v0.1.0 (/home/runner/work/Starry/Starry/crates/dw_apb_uart)
    Checking arm_gic v0.1.0 (/home/runner/work/Starry/Starry/crates/arm_gic)
    Checking embedded-graphics-core v0.4.0
    Checking arm_pl011 v0.1.0 (/home/runner/work/Starry/Starry/crates/arm_pl011)
    Checking embedded-graphics v0.8.1
   Compiling lwext4_rust v0.1.0 (https://github.com/elliott10/lwext4_rust.git?rev=562fbfce#562fbfce)
   Compiling arceos_posix_api v0.1.0 (/home/runner/work/Starry/Starry/api/arceos_posix_api)
   Compiling axlibc v0.1.0 (/home/runner/work/Starry/Starry/ulib/axlibc)
    Checking tuple_for_each v0.1.0 (/home/runner/work/Starry/Starry/crates/tuple_for_each)
error: failed to run custom build command for `lwext4_rust v0.1.0 (https://github.com/elliott10/lwext4_rust.git?rev=562fbfce#562fbfce)`

Caused by:
  process didn't exit successfully: `/home/runner/work/Starry/Starry/target/debug/build/lwext4_rust-5ee0b4352797af52/build-script-build` (exit status: 101)
  --- stdout
  Retrieve lwext4 source code
  To patch lwext4 src
  make[1]: Entering directory '/root/.cargo/git/checkouts/lwext4_rust-4e222564268298f1/562fbfc/c/lwext4'
  rm -R -f build_musl-generic
  mkdir build_musl-generic
  cd build_musl-generic && cmake -G"Unix Makefiles" -DCMAKE_BUILD_TYPE=Release -DVERSION_MAJOR=1 -DVERSION_MINOR=0 -DVERSION_PATCH=0 -DVERSION=1.0.0-58bcf89 -DLWEXT4_BUILD_SHARED_LIB=OFF -DCMAKE_INSTALL_PREFIX=./install   -DCMAKE_TOOLCHAIN_FILE=../toolchain/musl-generic.cmake ..
  -- The C compiler identification is unknown
  -- Configuring incomplete, errors occurred!
  make[1]: Leaving directory '/root/.cargo/git/checkouts/lwext4_rust-4e222564268298f1/562fbfc/c/lwext4'

  --- stderr
  CMake Warning (dev) at CMakeLists.txt:1 (project):
    cmake_minimum_required() should be called prior to this top-level project()
    call.  Please see the cmake-commands(7) manual for usage documentation of
    both commands.
  This warning is for project developers.  Use -Wno-dev to suppress it.

  CMake Error at CMakeLists.txt:1 (project):
    The CMAKE_C_COMPILER:

      riscv64-linux-musl-cc

    is not a full path and was not found in the PATH.

    Tell CMake where to find the compiler by setting either the environment
    variable "CC" or the CMake cache entry CMAKE_C_COMPILER to the full path to
    the compiler, or to the compiler name if it is in the PATH.


  make[1]: *** [Makefile:37: musl-generic] Error 1
  thread 'main' panicked at /root/.cargo/git/checkouts/lwext4_rust-4e222564268298f1/562fbfc/build.rs:48:9:
  assertion failed: status.success()
  note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
warning: build failed, waiting for other jobs to finish...
make: *** [Makefile:196: clippy] Error 101
INFO     root:test_arceos.py:178 ç”¨ä¾‹ç»“æžœä¿¡æ¯--->æµ‹è¯•å¤±è´¥ï¼Œå‘½ä»¤æ‰§è¡Œå¤±è´¥
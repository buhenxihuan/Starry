{"uid":"92a07b885c86ef69","name":"测试ArceOS 宏内核 基本功能","fullName":"testcase.test_arceos#test_arceos_monokernel","historyId":"4765b0f010c4ee365d68b861f1815adf","time":{"start":1709882974546,"stop":1709883174567,"duration":200021},"description":"测试用例简要描述: {\n\"测试架构\": \"riscv64\",\n\"文件系统\": \"fat32\",\n\"提交者\": \"buhenxihuan\",\n\"提交ID\": \"6d06990f9db54b077429ed322a4d6c6ee111f9db\",\n\"提交时间\": \"Fri Mar  8 15:26:16 UTC 2024\",\n\"仓库名\": \"buhenxihuan/Starry\",\n\"分支名\": \"x86_64\",\n\"工作目录\": \"/home/runner/work/Starry/Starry\"\n}","descriptionHtml":"<p>测试用例简要描述: {<br />\n&quot;测试架构&quot;: &quot;riscv64&quot;,<br />\n&quot;文件系统&quot;: &quot;fat32&quot;,<br />\n&quot;提交者&quot;: &quot;buhenxihuan&quot;,<br />\n&quot;提交ID&quot;: &quot;6d06990f9db54b077429ed322a4d6c6ee111f9db&quot;,<br />\n&quot;提交时间&quot;: &quot;Fri Mar  8 15:26:16 UTC 2024&quot;,<br />\n&quot;仓库名&quot;: &quot;buhenxihuan/Starry&quot;,<br />\n&quot;分支名&quot;: &quot;x86_64&quot;,<br />\n&quot;工作目录&quot;: &quot;/home/runner/work/Starry/Starry&quot;<br />\n}</p>\n","status":"broken","statusMessage":"ProcessLookupError: [Errno 3] No such process","statusTrace":"self = <lib.cmd.cmd object at 0x7f226d490280>\ncmd = 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:/home/runner/work/Starry/Starry/riscv64-linux-mus...tarry && ./build_img.sh riscv64 fat32 && make A=apps/monolithic_userboot ARCH=riscv64 TC=iozone APP_FEATURES=batch run'\n\n    def run_cmd(self, cmd):\n        p = None\n        try:\n            p = subprocess.Popen(cmd, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\n>           stdout, stderr = p.communicate(timeout=200)\n\nlib/cmd.py:100: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/usr/lib/python3.10/subprocess.py:1154: in communicate\n    stdout, stderr = self._communicate(input, endtime, timeout)\n/usr/lib/python3.10/subprocess.py:2022: in _communicate\n    self._check_timeout(endtime, orig_timeout, stdout, stderr)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Popen: returncode: None args: 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:...>\nendtime = 452.012659042, orig_timeout = 200\nstdout_seq = [b\"rm: cannot remove 'disk.img'\", b': No such file or directory\\n', b'30+0 records in\\n30+0 records out\\n125829120 byt...\\x1b[92;1mBuilding\\x1b[0m App: monolithic_userboot, Arch: riscv64, Platform: riscv64-qemu-virt, App type: rust\\n', ...]\nstderr_seq = None, skip_check_and_raise = False\n\n    def _check_timeout(self, endtime, orig_timeout, stdout_seq, stderr_seq,\n                       skip_check_and_raise=False):\n        \"\"\"Convenience for checking if a timeout has expired.\"\"\"\n        if endtime is None:\n            return\n        if skip_check_and_raise or _time() > endtime:\n>           raise TimeoutExpired(\n                    self.args, orig_timeout,\n                    output=b''.join(stdout_seq) if stdout_seq else None,\n                    stderr=b''.join(stderr_seq) if stderr_seq else None)\nE           subprocess.TimeoutExpired: Command 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:/home/runner/work/Starry/Starry/riscv64-linux-musl-cross/bin:/home/runner/work/Starry/Starry/aarch64-linux-musl-cross/bin:/home/runner/work/Starry/Starry/x86_64-linux-musl-cross/bin &&              cd /home/runner/work/Starry/Starry && ./build_img.sh riscv64 fat32 && make A=apps/monolithic_userboot ARCH=riscv64 TC=iozone APP_FEATURES=batch run' timed out after 200 seconds\n\n/usr/lib/python3.10/subprocess.py:1198: TimeoutExpired\n\nDuring handling of the above exception, another exception occurred:\n\ncmdRun = <lib.cmd.cmd object at 0x7f226d490280>, monoTcList = 'iozone'\n\n    @allure.feature(\"特性（对应敏捷开发中的feature）\")\n    @allure.issue(url=\"\",name=\"用例对应issuer的链接，若没有可删除此行\")\n    @allure.link(url=\"\",name=\"用例对应需求的链接，若没有，可删除此行\")\n    @allure.story(\"故事（对应敏捷开发中的story)\")\n    @allure.severity('用例的级别，一般常用的级别为：blocker（阻塞缺陷），critical（严重缺陷），normal（一般缺陷），minor次要缺陷，trivial（轻微缺陷）')\n    @allure.title(\"测试ArceOS 宏内核 基本功能\")\n    @allure.description(\"测试用例简要描述: %s\" %json.dumps(commitConfig, indent=0, ensure_ascii=False))\n    @pytest.mark.parametrize(\"monoTcList\", monoTcList)\n    @pytest.mark.repeat(1)\n    def test_arceos_monokernel(cmdRun, monoTcList):\n        \"\"\"测试内核实时性指标\"\"\"\n>       kpi = step_01_mono(cmdRun, monoTcList)\n\ntestcase/test_arceos.py:134: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntestcase/test_arceos.py:85: in step_01_mono\n    retcode, res = cmdRun.run_cmd(_cmd)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <lib.cmd.cmd object at 0x7f226d490280>\ncmd = 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:/home/runner/work/Starry/Starry/riscv64-linux-mus...tarry && ./build_img.sh riscv64 fat32 && make A=apps/monolithic_userboot ARCH=riscv64 TC=iozone APP_FEATURES=batch run'\n\n    def run_cmd(self, cmd):\n        p = None\n        try:\n            p = subprocess.Popen(cmd, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\n            stdout, stderr = p.communicate(timeout=200)\n        except Exception as e:\n            if p:\n>               os.killpg(p.pid, signal.SIGKILL)\nE               ProcessLookupError: [Errno 3] No such process\n\nlib/cmd.py:103: ProcessLookupError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"cmdRun","time":{"start":1709882917973,"stop":1709882917974,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"测试用例简要描述: {\n\"测试架构\": \"riscv64\",\n\"文件系统\": \"fat32\",\n\"提交者\": \"buhenxihuan\",\n\"提交ID\": \"6d06990f9db54b077429ed322a4d6c6ee111f9db\",\n\"提交时间\": \"Fri Mar  8 15:26:16 UTC 2024\",\n\"仓库名\": \"buhenxihuan/Starry\",\n\"分支名\": \"x86_64\",\n\"工作目录\": \"/home/runner/work/Starry/Starry\"\n}","status":"broken","statusMessage":"ProcessLookupError: [Errno 3] No such process","statusTrace":"self = <lib.cmd.cmd object at 0x7f226d490280>\ncmd = 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:/home/runner/work/Starry/Starry/riscv64-linux-mus...tarry && ./build_img.sh riscv64 fat32 && make A=apps/monolithic_userboot ARCH=riscv64 TC=iozone APP_FEATURES=batch run'\n\n    def run_cmd(self, cmd):\n        p = None\n        try:\n            p = subprocess.Popen(cmd, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\n>           stdout, stderr = p.communicate(timeout=200)\n\nlib/cmd.py:100: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/usr/lib/python3.10/subprocess.py:1154: in communicate\n    stdout, stderr = self._communicate(input, endtime, timeout)\n/usr/lib/python3.10/subprocess.py:2022: in _communicate\n    self._check_timeout(endtime, orig_timeout, stdout, stderr)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Popen: returncode: None args: 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:...>\nendtime = 452.012659042, orig_timeout = 200\nstdout_seq = [b\"rm: cannot remove 'disk.img'\", b': No such file or directory\\n', b'30+0 records in\\n30+0 records out\\n125829120 byt...\\x1b[92;1mBuilding\\x1b[0m App: monolithic_userboot, Arch: riscv64, Platform: riscv64-qemu-virt, App type: rust\\n', ...]\nstderr_seq = None, skip_check_and_raise = False\n\n    def _check_timeout(self, endtime, orig_timeout, stdout_seq, stderr_seq,\n                       skip_check_and_raise=False):\n        \"\"\"Convenience for checking if a timeout has expired.\"\"\"\n        if endtime is None:\n            return\n        if skip_check_and_raise or _time() > endtime:\n>           raise TimeoutExpired(\n                    self.args, orig_timeout,\n                    output=b''.join(stdout_seq) if stdout_seq else None,\n                    stderr=b''.join(stderr_seq) if stderr_seq else None)\nE           subprocess.TimeoutExpired: Command 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:/home/runner/work/Starry/Starry/riscv64-linux-musl-cross/bin:/home/runner/work/Starry/Starry/aarch64-linux-musl-cross/bin:/home/runner/work/Starry/Starry/x86_64-linux-musl-cross/bin &&              cd /home/runner/work/Starry/Starry && ./build_img.sh riscv64 fat32 && make A=apps/monolithic_userboot ARCH=riscv64 TC=iozone APP_FEATURES=batch run' timed out after 200 seconds\n\n/usr/lib/python3.10/subprocess.py:1198: TimeoutExpired\n\nDuring handling of the above exception, another exception occurred:\n\ncmdRun = <lib.cmd.cmd object at 0x7f226d490280>, monoTcList = 'iozone'\n\n    @allure.feature(\"特性（对应敏捷开发中的feature）\")\n    @allure.issue(url=\"\",name=\"用例对应issuer的链接，若没有可删除此行\")\n    @allure.link(url=\"\",name=\"用例对应需求的链接，若没有，可删除此行\")\n    @allure.story(\"故事（对应敏捷开发中的story)\")\n    @allure.severity('用例的级别，一般常用的级别为：blocker（阻塞缺陷），critical（严重缺陷），normal（一般缺陷），minor次要缺陷，trivial（轻微缺陷）')\n    @allure.title(\"测试ArceOS 宏内核 基本功能\")\n    @allure.description(\"测试用例简要描述: %s\" %json.dumps(commitConfig, indent=0, ensure_ascii=False))\n    @pytest.mark.parametrize(\"monoTcList\", monoTcList)\n    @pytest.mark.repeat(1)\n    def test_arceos_monokernel(cmdRun, monoTcList):\n        \"\"\"测试内核实时性指标\"\"\"\n>       kpi = step_01_mono(cmdRun, monoTcList)\n\ntestcase/test_arceos.py:134: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntestcase/test_arceos.py:85: in step_01_mono\n    retcode, res = cmdRun.run_cmd(_cmd)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <lib.cmd.cmd object at 0x7f226d490280>\ncmd = 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:/home/runner/work/Starry/Starry/riscv64-linux-mus...tarry && ./build_img.sh riscv64 fat32 && make A=apps/monolithic_userboot ARCH=riscv64 TC=iozone APP_FEATURES=batch run'\n\n    def run_cmd(self, cmd):\n        p = None\n        try:\n            p = subprocess.Popen(cmd, shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\n            stdout, stderr = p.communicate(timeout=200)\n        except Exception as e:\n            if p:\n>               os.killpg(p.pid, signal.SIGKILL)\nE               ProcessLookupError: [Errno 3] No such process\n\nlib/cmd.py:103: ProcessLookupError","steps":[{"name":"测试步骤一：执行 宏内核 测试","time":{"start":1709882974546,"stop":1709883174566,"duration":200020},"status":"broken","statusMessage":"ProcessLookupError: [Errno 3] No such process\n","statusTrace":"  File \"/usr/local/lib/python3.10/dist-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/Starry/Starry/pytest/testcase/test_arceos.py\", line 85, in step_01_mono\n    retcode, res = cmdRun.run_cmd(_cmd)\n  File \"/home/runner/work/Starry/Starry/pytest/lib/cmd.py\", line 103, in run_cmd\n    os.killpg(p.pid, signal.SIGKILL)\n","steps":[],"attachments":[],"parameters":[{"name":"cmdRun","value":"<lib.cmd.cmd object at 0x7f226d490280>"},{"name":"cmdTc","value":"'iozone'"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"5ddafeb947001698","name":"log","source":"5ddafeb947001698.txt","type":"text/plain","size":507}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"cmdRun::0","time":{"start":1709883271126,"stop":1709883271126,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"特性（对应敏捷开发中的feature）"},{"name":"severity","value":"用例的级别，一般常用的级别为：blocker（阻塞缺陷），critical（严重缺陷），normal（一般缺陷），minor次要缺陷，trivial（轻微缺陷）"},{"name":"story","value":"故事（对应敏捷开发中的story)"},{"name":"tag","value":"repeat(1)"},{"name":"parentSuite","value":"testcase"},{"name":"suite","value":"test_arceos"},{"name":"host","value":"fv-az732-108"},{"name":"thread","value":"6101-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcase.test_arceos"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"monoTcList","value":"'iozone'"}],"links":[{"name":"用例对应需求的链接，若没有，可删除此行","type":"link"},{"name":"用例对应issuer的链接，若没有可删除此行","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":["repeat(1)"]},"source":"92a07b885c86ef69.json","parameterValues":["'iozone'"]}
{"uid":"9168e42b46f0c662","name":"测试ArceOS 宏内核 基本功能","fullName":"testcase.test_arceos#test_arceos_monokernel","historyId":"869a94e4c4bceb6331c6962047bf6f42","time":{"start":1709887535954,"stop":1709887536351,"duration":397},"description":"码仓提交信息===>{\n\"测试架构\": \"x86_64\",\n\"文件系统\": \"fat32\",\n\"提交者\": \"buhenxihuan\",\n\"提交ID\": \"cbf078ea0cd7bd936dfb1dd468d30016b04da5e9\",\n\"提交时间\": \"Fri Mar  8 16:42:47 UTC 2024\",\n\"仓库名\": \"buhenxihuan/Starry\",\n\"分支名\": \"x86_64\",\n\"工作目录\": \"/home/runner/work/Starry/Starry\"\n}\n用例结果信息===>测试失败，命令执行失败，错误信息：\ntrue\nrm: cannot remove 'disk.img': No such file or directory\n30+0 records in\n30+0 records out\n125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s\nmkfs.fat 4.2 (2021-01-31)\nCopying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk\n","descriptionHtml":"<p>码仓提交信息===&gt;{<br />\n&quot;测试架构&quot;: &quot;x86_64&quot;,<br />\n&quot;文件系统&quot;: &quot;fat32&quot;,<br />\n&quot;提交者&quot;: &quot;buhenxihuan&quot;,<br />\n&quot;提交ID&quot;: &quot;cbf078ea0cd7bd936dfb1dd468d30016b04da5e9&quot;,<br />\n&quot;提交时间&quot;: &quot;Fri Mar  8 16:42:47 UTC 2024&quot;,<br />\n&quot;仓库名&quot;: &quot;buhenxihuan/Starry&quot;,<br />\n&quot;分支名&quot;: &quot;x86_64&quot;,<br />\n&quot;工作目录&quot;: &quot;/home/runner/work/Starry/Starry&quot;<br />\n}<br />\n用例结果信息===&gt;测试失败，命令执行失败，错误信息：<br />\ntrue<br />\nrm: cannot remove 'disk.img': No such file or directory<br />\n30+0 records in<br />\n30+0 records out<br />\n125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s<br />\nmkfs.fat 4.2 (2021-01-31)<br />\nCopying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk</p>\n","status":"failed","statusMessage":"AssertionError: 测试失败，命令执行失败，错误信息：\n  true\n  rm: cannot remove 'disk.img': No such file or directory\n  30+0 records in\n  30+0 records out\n  125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s\n  mkfs.fat 4.2 (2021-01-31)\n  Copying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk\nassert False","statusTrace":"cmdRun = <lib.cmd.cmd object at 0x7fa250280280>, monoTcList = 'busybox'\n\n    @allure.feature(\"特性（对应敏捷开发中的feature）\")\n    @allure.issue(url=\"\",name=\"用例对应issuer的链接，若没有可删除此行\")\n    @allure.link(url=\"\",name=\"用例对应需求的链接，若没有，可删除此行\")\n    @allure.story(\"故事（对应敏捷开发中的story)\")\n    @allure.severity('用例的级别，一般常用的级别为：blocker（阻塞缺陷），critical（严重缺陷），normal（一般缺陷），minor次要缺陷，trivial（轻微缺陷）')\n    @allure.title(\"测试ArceOS 宏内核 基本功能\")\n    @allure.description(\"测试用例简要描述: %s\" %json.dumps(commitConfig, indent=0, ensure_ascii=False))\n    @pytest.mark.parametrize(\"monoTcList\", monoTcList)\n    @pytest.mark.repeat(1)\n    def test_arceos_monokernel(cmdRun, monoTcList):\n        \"\"\"测试内核实时性指标\"\"\"\n>       kpi = step_01_mono(cmdRun, monoTcList)\n\ntestcase/test_arceos.py:134: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncmdRun = <lib.cmd.cmd object at 0x7fa250280280>, cmdTc = 'busybox'\n\n    @allure.step(\"测试步骤一：执行 宏内核 测试\")\n    def step_01_mono(cmdRun, cmdTc):\n        _cmd = 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:%s/riscv64-linux-musl-cross/bin:%s/aarch64-linux-musl-cross/bin:%s/x86_64-linux-musl-cross/bin && \\\n                 cd %s && ./build_img.sh %s %s && sudo fuser -k 5555/tcp 5555/udp && make A=apps/monolithic_userboot ARCH=%s TC=%s APP_FEATURES=batch run' %(commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"测试架构\"), \\\n                                                                                          commitConfig.get(\"文件系统\"), \\\n                                                                                          commitConfig.get(\"测试架构\"), \\\n                                                                                          cmdTc)\n        logging.info(\"test_type=monokernel\")\n        logging.info(\"test_cmd=\" + _cmd)\n        retcode, res = cmdRun.run_cmd(_cmd)\n        logging.info(\"res=\" + res)\n        flag, msg = validator.validator().check(retcode, res)\n        allure.dynamic.description(\"码仓提交信息===>%s\\n\" %json.dumps(commitConfig, indent=0, ensure_ascii=False)\n                                 + \"用例结果信息===>%s\\n\" %msg)\n        logging.info(\"用例结果信息--->\" + msg)\n>       assert flag, msg\nE       AssertionError: 测试失败，命令执行失败，错误信息：\nE         true\nE         rm: cannot remove 'disk.img': No such file or directory\nE         30+0 records in\nE         30+0 records out\nE         125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s\nE         mkfs.fat 4.2 (2021-01-31)\nE         Copying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk\nE       assert False\n\ntestcase/test_arceos.py:91: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"cmdRun","time":{"start":1709887483135,"stop":1709887483135,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"description":"码仓提交信息===>{\n\"测试架构\": \"x86_64\",\n\"文件系统\": \"fat32\",\n\"提交者\": \"buhenxihuan\",\n\"提交ID\": \"cbf078ea0cd7bd936dfb1dd468d30016b04da5e9\",\n\"提交时间\": \"Fri Mar  8 16:42:47 UTC 2024\",\n\"仓库名\": \"buhenxihuan/Starry\",\n\"分支名\": \"x86_64\",\n\"工作目录\": \"/home/runner/work/Starry/Starry\"\n}\n用例结果信息===>测试失败，命令执行失败，错误信息：\ntrue\nrm: cannot remove 'disk.img': No such file or directory\n30+0 records in\n30+0 records out\n125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s\nmkfs.fat 4.2 (2021-01-31)\nCopying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk\n","status":"failed","statusMessage":"AssertionError: 测试失败，命令执行失败，错误信息：\n  true\n  rm: cannot remove 'disk.img': No such file or directory\n  30+0 records in\n  30+0 records out\n  125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s\n  mkfs.fat 4.2 (2021-01-31)\n  Copying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk\nassert False","statusTrace":"cmdRun = <lib.cmd.cmd object at 0x7fa250280280>, monoTcList = 'busybox'\n\n    @allure.feature(\"特性（对应敏捷开发中的feature）\")\n    @allure.issue(url=\"\",name=\"用例对应issuer的链接，若没有可删除此行\")\n    @allure.link(url=\"\",name=\"用例对应需求的链接，若没有，可删除此行\")\n    @allure.story(\"故事（对应敏捷开发中的story)\")\n    @allure.severity('用例的级别，一般常用的级别为：blocker（阻塞缺陷），critical（严重缺陷），normal（一般缺陷），minor次要缺陷，trivial（轻微缺陷）')\n    @allure.title(\"测试ArceOS 宏内核 基本功能\")\n    @allure.description(\"测试用例简要描述: %s\" %json.dumps(commitConfig, indent=0, ensure_ascii=False))\n    @pytest.mark.parametrize(\"monoTcList\", monoTcList)\n    @pytest.mark.repeat(1)\n    def test_arceos_monokernel(cmdRun, monoTcList):\n        \"\"\"测试内核实时性指标\"\"\"\n>       kpi = step_01_mono(cmdRun, monoTcList)\n\ntestcase/test_arceos.py:134: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncmdRun = <lib.cmd.cmd object at 0x7fa250280280>, cmdTc = 'busybox'\n\n    @allure.step(\"测试步骤一：执行 宏内核 测试\")\n    def step_01_mono(cmdRun, cmdTc):\n        _cmd = 'export PATH=$PATH:/home/xh/qemu-7.0.0/build:/home/runner/.cargo/bin:%s/riscv64-linux-musl-cross/bin:%s/aarch64-linux-musl-cross/bin:%s/x86_64-linux-musl-cross/bin && \\\n                 cd %s && ./build_img.sh %s %s && sudo fuser -k 5555/tcp 5555/udp && make A=apps/monolithic_userboot ARCH=%s TC=%s APP_FEATURES=batch run' %(commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"工作目录\"), \\\n                                                                                          commitConfig.get(\"测试架构\"), \\\n                                                                                          commitConfig.get(\"文件系统\"), \\\n                                                                                          commitConfig.get(\"测试架构\"), \\\n                                                                                          cmdTc)\n        logging.info(\"test_type=monokernel\")\n        logging.info(\"test_cmd=\" + _cmd)\n        retcode, res = cmdRun.run_cmd(_cmd)\n        logging.info(\"res=\" + res)\n        flag, msg = validator.validator().check(retcode, res)\n        allure.dynamic.description(\"码仓提交信息===>%s\\n\" %json.dumps(commitConfig, indent=0, ensure_ascii=False)\n                                 + \"用例结果信息===>%s\\n\" %msg)\n        logging.info(\"用例结果信息--->\" + msg)\n>       assert flag, msg\nE       AssertionError: 测试失败，命令执行失败，错误信息：\nE         true\nE         rm: cannot remove 'disk.img': No such file or directory\nE         30+0 records in\nE         30+0 records out\nE         125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s\nE         mkfs.fat 4.2 (2021-01-31)\nE         Copying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk\nE       assert False\n\ntestcase/test_arceos.py:91: AssertionError","steps":[{"name":"测试步骤一：执行 宏内核 测试","time":{"start":1709887535954,"stop":1709887536351,"duration":397},"status":"failed","statusMessage":"AssertionError: 测试失败，命令执行失败，错误信息：\n  true\n  rm: cannot remove 'disk.img': No such file or directory\n  30+0 records in\n  30+0 records out\n  125829120 bytes (126 MB, 120 MiB) copied, 0.120103 s, 1.0 GB/s\n  mkfs.fat 4.2 (2021-01-31)\n  Copying x86_64 fat32 testsuits-x86_64-linux-musl/* to disk\nassert False\n","statusTrace":"  File \"/usr/local/lib/python3.10/dist-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/Starry/Starry/pytest/testcase/test_arceos.py\", line 91, in step_01_mono\n    assert flag, msg\n","steps":[],"attachments":[],"parameters":[{"name":"cmdRun","value":"<lib.cmd.cmd object at 0x7fa250280280>"},{"name":"cmdTc","value":"'busybox'"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[{"uid":"b8144a8fc84d231a","name":"log","source":"b8144a8fc84d231a.txt","type":"text/plain","size":1167}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"cmdRun::0","time":{"start":1709887540014,"stop":1709887540014,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"feature","value":"特性（对应敏捷开发中的feature）"},{"name":"story","value":"故事（对应敏捷开发中的story)"},{"name":"severity","value":"用例的级别，一般常用的级别为：blocker（阻塞缺陷），critical（严重缺陷），normal（一般缺陷），minor次要缺陷，trivial（轻微缺陷）"},{"name":"tag","value":"repeat(1)"},{"name":"parentSuite","value":"testcase"},{"name":"suite","value":"test_arceos"},{"name":"host","value":"fv-az775-832"},{"name":"thread","value":"6214-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testcase.test_arceos"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"monoTcList","value":"'busybox'"}],"links":[{"name":"用例对应需求的链接，若没有，可删除此行","type":"link"},{"name":"用例对应issuer的链接，若没有可删除此行","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["repeat(1)"]},"source":"9168e42b46f0c662.json","parameterValues":["'busybox'"]}